{"ast":null,"code":"var _jsxFileName = \"C:\\\\diplom_4kurs\\\\src\\\\somarket\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect } from 'react';\nimport './App.css';\nimport { BrowserRouter, useLocation, useNavigate } from 'react-router-dom';\nimport AppRouter from './components/AppRouter';\nimport NavBar from './components/NavBarr';\nimport { observer } from 'mobx-react-lite';\nimport { Context } from './index';\nimport { check } from './http/userAPI';\nimport { LOGIN_ROUTE, REGISTRATION_ROUTE } from './utils/consts';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst App = _s(observer(_c = _s(() => {\n  _s();\n  const {\n    user\n  } = useContext(Context);\n  const navigate = useNavigate();\n  const location = useLocation();\n  useEffect(() => {\n    const authenticate = async () => {\n      const userData = await check();\n      if (userData) {\n        user.setUser(userData);\n        user.setIsAuth(true);\n      } else {\n        user.setUser({});\n        user.setIsAuth(false);\n        if (location.pathname !== REGISTRATION_ROUTE) {\n          navigate(LOGIN_ROUTE);\n        }\n      }\n    };\n    authenticate();\n  }, [navigate, location.pathname, user]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AppRouter, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}, \"W12BIRIQ3ug8UyseXbB5P/ac0xY=\", false, function () {\n  return [useNavigate, useLocation];\n})), \"W12BIRIQ3ug8UyseXbB5P/ac0xY=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"App$observer\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useContext","useEffect","BrowserRouter","useLocation","useNavigate","AppRouter","NavBar","observer","Context","check","LOGIN_ROUTE","REGISTRATION_ROUTE","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","_c","user","navigate","location","authenticate","userData","setUser","setIsAuth","pathname","children","fileName","_jsxFileName","lineNumber","columnNumber","_c2","$RefreshReg$"],"sources":["C:/diplom_4kurs/src/somarket/src/App.js"],"sourcesContent":["import React, { useContext, useEffect } from 'react';\r\nimport './App.css';\r\nimport { BrowserRouter as BrowserRouter, useLocation, useNavigate } from 'react-router-dom';\r\nimport AppRouter from './components/AppRouter';\r\nimport NavBar from './components/NavBarr';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { Context } from './index';\r\nimport { check } from './http/userAPI';\r\nimport { LOGIN_ROUTE, REGISTRATION_ROUTE } from './utils/consts';\r\n\r\n\r\nconst App = observer(() => {\r\n  const {user} = useContext(Context);\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    const authenticate = async () => {\r\n        const userData = await check();\r\n        if (userData) {\r\n            user.setUser(userData);\r\n            user.setIsAuth(true);\r\n        } else {\r\n            user.setUser({});\r\n            user.setIsAuth(false);\r\n            if (location.pathname !== REGISTRATION_ROUTE) {\r\n              navigate(LOGIN_ROUTE)\r\n            }\r\n        }\r\n    };\r\n\r\n    authenticate();\r\n  }, [navigate, location.pathname, user]);\r\n\r\n  return (\r\n    <>\r\n      <NavBar />\r\n      <AppRouter />\r\n    </>\r\n  );\r\n});\r\n\r\nexport default App;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AACpD,OAAO,WAAW;AAClB,SAASC,aAA8B,EAAEC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3F,OAAOC,SAAS,MAAM,wBAAwB;AAC9C,OAAOC,MAAM,MAAM,sBAAsB;AACzC,SAASC,QAAQ,QAAQ,iBAAiB;AAC1C,SAASC,OAAO,QAAQ,SAAS;AACjC,SAASC,KAAK,QAAQ,gBAAgB;AACtC,SAASC,WAAW,EAAEC,kBAAkB,QAAQ,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAGjE,MAAMC,GAAG,GAAAC,EAAA,CAAGV,QAAQ,CAAAW,EAAA,GAAAD,EAAA,CAAC,MAAM;EAAAA,EAAA;EACzB,MAAM;IAACE;EAAI,CAAC,GAAGnB,UAAU,CAACQ,OAAO,CAAC;EAClC,MAAMY,QAAQ,GAAGhB,WAAW,CAAC,CAAC;EAC9B,MAAMiB,QAAQ,GAAGlB,WAAW,CAAC,CAAC;EAE9BF,SAAS,CAAC,MAAM;IACd,MAAMqB,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC7B,MAAMC,QAAQ,GAAG,MAAMd,KAAK,CAAC,CAAC;MAC9B,IAAIc,QAAQ,EAAE;QACVJ,IAAI,CAACK,OAAO,CAACD,QAAQ,CAAC;QACtBJ,IAAI,CAACM,SAAS,CAAC,IAAI,CAAC;MACxB,CAAC,MAAM;QACHN,IAAI,CAACK,OAAO,CAAC,CAAC,CAAC,CAAC;QAChBL,IAAI,CAACM,SAAS,CAAC,KAAK,CAAC;QACrB,IAAIJ,QAAQ,CAACK,QAAQ,KAAKf,kBAAkB,EAAE;UAC5CS,QAAQ,CAACV,WAAW,CAAC;QACvB;MACJ;IACJ,CAAC;IAEDY,YAAY,CAAC,CAAC;EAChB,CAAC,EAAE,CAACF,QAAQ,EAAEC,QAAQ,CAACK,QAAQ,EAAEP,IAAI,CAAC,CAAC;EAEvC,oBACEN,OAAA,CAAAE,SAAA;IAAAY,QAAA,gBACEd,OAAA,CAACP,MAAM;MAAAsB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACVlB,OAAA,CAACR,SAAS;MAAAuB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA,eACb,CAAC;AAEP,CAAC;EAAA,QA3BkB3B,WAAW,EACXD,WAAW;AAAA,EA0B7B,CAAC;EAAA,QA3BiBC,WAAW,EACXD,WAAW;AAAA,EA0B5B;AAAC6B,GAAA,GA7BGhB,GAAG;AA+BT,eAAeA,GAAG;AAAC,IAAAE,EAAA,EAAAc,GAAA;AAAAC,YAAA,CAAAf,EAAA;AAAAe,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}